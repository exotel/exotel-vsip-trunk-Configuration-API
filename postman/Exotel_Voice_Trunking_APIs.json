{
  "info": {
    "name": "Exotel Voice Trunking APIs",
    "description": "Connect your communication system to the telephone network using Exotel's Voice Trunking service.\n\n## Setup\n1. Go to **Authorization** tab → Select **Basic Auth**\n2. Enter your API Key as Username\n3. Enter your API Token as Password\n4. Update `subdomain` and `your_sid` in the URL\n5. Fill form-data parameters in Body tab\n\n## Use Cases\n**Outbound / Termination (SIP → PSTN):** Create Trunk → Map Phone Number → Whitelist IP (Static IP required)\n**Inbound / Origination (PSTN → SIP):** Create Trunk → Map Phone Number → Add Destination URI (IP or FQDN supported)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "OUTBOUND / TERMINATION (SIP → PSTN)",
      "item": [
        {
          "name": "1. Create Trunk",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "trunk_name",
                  "value": "my_trunk",
                  "description": "Unique name (max 16 chars, alphanumeric + underscore)",
                  "type": "text"
                },
                {
                  "key": "nso_code",
                  "value": "ANY-ANY",
                  "description": "Network Service Operator code",
                  "type": "text"
                },
                {
                  "key": "domain_name",
                  "value": "<your_sid>.pstn.exotel.com",
                  "description": "Replace <your_sid> with your Account SID",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks"]
            },
            "description": "Creates a virtual connection between your system and Exotel's PSTN gateway.\n\n**Setup:**\n1. Replace `<subdomain>` with: `api.in.exotel.com` (India) or `api.exotel.com` (Singapore)\n2. Replace `<your_sid>` with your Account SID\n3. Go to Authorization tab → Basic Auth → Enter API Key & Token\n\n**Response:** Returns `trunk_sid` - save this for subsequent APIs"
          }
        },
        {
          "name": "2. Map Phone Number",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "phone_number",
                  "value": "+919XXXXXXXXX",
                  "description": "Phone number in E.164 format (your Caller ID for outbound calls)",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/phone-numbers",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "phone-numbers"]
            },
            "description": "Maps a phone number (DID) as your outbound Caller ID.\n\n**Setup:**\n1. Replace `<subdomain>` and `<your_sid>`\n2. Replace `<trunk_sid>` with trunk_sid from Create Trunk response\n3. Enter your phone number in form-data"
          }
        },
        {
          "name": "3. Whitelist IP",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "ip",
                  "value": "",
                  "description": "Your server's public IP address",
                  "type": "text"
                },
                {
                  "key": "mask",
                  "value": "32",
                  "description": "Subnet mask (32 for single IP)",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/whitelisted-ips",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "whitelisted-ips"]
            },
            "description": "Registers your server's IP for secure authentication.\n\n**Mask values:**\n- 32 = Single IP\n- 28 = 16 IPs\n- 24 = 256 IPs"
          }
        }
      ]
    },
    {
      "name": "INBOUND / ORIGINATION (PSTN → SIP)",
      "item": [
        {
          "name": "1. Create Trunk",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "trunk_name",
                  "value": "my_trunk_inbound",
                  "description": "Unique name (max 16 chars, alphanumeric + underscore)",
                  "type": "text"
                },
                {
                  "key": "nso_code",
                  "value": "ANY-ANY",
                  "description": "Network Service Operator code",
                  "type": "text"
                },
                {
                  "key": "domain_name",
                  "value": "<your_sid>.pstn.exotel.com",
                  "description": "Replace <your_sid> with your Account SID",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks"]
            },
            "description": "Creates a trunk for receiving inbound calls.\n\n**Setup:**\n1. Replace `<subdomain>` with: `api.in.exotel.com` (India) or `api.exotel.com` (Singapore)\n2. Replace `<your_sid>` with your Account SID\n3. Go to Authorization tab → Basic Auth → Enter API Key & Token"
          }
        },
        {
          "name": "2. Map Phone Number",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "phone_number",
                  "value": "+919XXXXXXXXX",
                  "description": "Phone number customers will dial to reach you (E.164 format)",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/phone-numbers",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "phone-numbers"]
            },
            "description": "Maps the phone number that customers will dial to reach you.\n\n**Setup:**\n1. Replace `<trunk_sid>` with trunk_sid from Create Trunk response"
          }
        },
        {
          "name": "3. Add Destination URI (TLS)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"destinations\": [\n    {\n      \"destination\": \"<your_server_ip>:5061;transport=tls\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/destination-uris",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "destination-uris"]
            },
            "description": "Tells Exotel where to send incoming calls (your server's SIP address).\n\n**Setup:**\n1. Replace `<your_server_ip>` with your SIP server's public IP\n2. Port 5061 for TLS (recommended), 5060 for TCP\n\n**For TCP:** Change `transport=tls` to `transport=tcp` and port to 5060"
          }
        }
      ]
    },
    {
      "name": "GET APIs",
      "item": [
        {
          "name": "Get Destination URIs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/destination-uris",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "destination-uris"]
            },
            "description": "Retrieves all destination URIs configured for the trunk."
          }
        },
        {
          "name": "Get Whitelisted IPs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/whitelisted-ips",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "whitelisted-ips"]
            },
            "description": "Retrieves all whitelisted IPs for the trunk."
          }
        },
        {
          "name": "Get Credentials",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/credentials",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "credentials"]
            },
            "description": "Retrieves SIP authentication credentials (username & password) for the trunk."
          }
        },
        {
          "name": "Get Phone Numbers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/phone-numbers",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>}", "trunks", "<trunk_sid>", "phone-numbers"]
            },
            "description": "Retrieves all phone numbers mapped to the trunk."
          }
        }
      ]
    },
    {
      "name": "Settings & Delete",
      "item": [
        {
          "name": "Set Trunk Alias",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"settings\": [\n    {\n      \"name\": \"trunk_external_alias\",\n      \"value\": \"+919XXXXXXXXX\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/settings",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "settings"]
            },
            "description": "Sets an external Caller ID alias for the trunk.\n\n**Setup:**\nReplace `+919XXXXXXXXX` with your phone number"
          }
        },
        {
          "name": "Delete Trunk ⚠️",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks?trunk_sid=<trunk_sid>",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks"],
              "query": [
                {
                  "key": "trunk_sid",
                  "value": "<trunk_sid>",
                  "description": "Trunk SID to delete"
                }
              ]
            },
            "description": "⚠️ PERMANENTLY deletes the trunk and ALL configurations.\n\nThis action cannot be undone!"
          }
        }
      ]
    }
  ],
  "auth": {
    "type": "basic",
    "basic": [
      {
        "key": "username",
        "value": "",
        "type": "string"
      },
      {
        "key": "password",
        "value": "",
        "type": "string"
      }
    ]
  }
}
