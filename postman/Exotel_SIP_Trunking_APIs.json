{
  "info": {
    "name": "Exotel SIP Trunking APIs",
    "description": "Connect your communication system to the telephone network.\n\n## Setup\n1. Authorization tab: Basic Auth with API Key and Token\n2. Replace <subdomain>, <your_sid>, <trunk_sid> in URL\n3. Fill Body parameters\n\n## Use Cases\n- Outbound/Termination: mode=pstn (default)\n- Inbound/Origination: destination URI\n- StreamKit: mode=flow",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "OUTBOUND / TERMINATION",
      "description": "Make calls to PSTN. Requires static IP.",
      "item": [
        {
          "name": "1. Create Trunk",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"trunk_name\": \"outbound_trunk\",\n  \"nso_code\": \"ANY-ANY\",\n  \"domain_name\": \"<your_sid>.pstn.exotel.com\"\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks"]
            },
            "description": "Creates a trunk. Save trunk_sid from response."
          }
        },
        {
          "name": "2. Map Phone Number (PSTN mode)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone_number\": \"+919876543210\",\n  \"mode\": \"pstn\"\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/phone-numbers",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "phone-numbers"]
            },
            "description": "Maps phone number with mode=pstn for PSTN calls."
          }
        },
        {
          "name": "3. Whitelist IP",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ip\": \"<your_server_ip>\",\n  \"mask\": 32\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/whitelisted-ips",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "whitelisted-ips"]
            },
            "description": "Whitelists your server IP. Required for outbound calls."
          }
        },
        {
          "name": "4. Get Credentials",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/credentials",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "credentials"]
            },
            "description": "Gets SIP username and password for PBX configuration."
          }
        }
      ]
    },
    {
      "name": "INBOUND / ORIGINATION",
      "description": "Receive calls from PSTN. Supports IP or FQDN.",
      "item": [
        {
          "name": "1. Create Trunk",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"trunk_name\": \"inbound_trunk\",\n  \"nso_code\": \"ANY-ANY\",\n  \"domain_name\": \"<your_sid>.pstn.exotel.com\"\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks"]
            },
            "description": "Creates a trunk for inbound calls."
          }
        },
        {
          "name": "2. Map Phone Number",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone_number\": \"+911800123456\"\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/phone-numbers",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "phone-numbers"]
            },
            "description": "Maps the phone number customers will dial."
          }
        },
        {
          "name": "3. Add Destination URI",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"destinations\": [\n    {\"destination\": \"<your_server_ip>:5061;transport=tls\"}\n  ]\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/destination-uris",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "destination-uris"]
            },
            "description": "Configures where inbound calls are routed. Use IP or FQDN."
          }
        }
      ]
    },
    {
      "name": "STREAMKIT",
      "description": "Connect to Voice AI bots. Uses mode=flow.",
      "item": [
        {
          "name": "1. Create Trunk",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"trunk_name\": \"streamkit_trunk\",\n  \"nso_code\": \"ANY-ANY\",\n  \"domain_name\": \"<your_sid>.pstn.exotel.com\"\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks"]
            },
            "description": "Creates a trunk for StreamKit/Voice AI."
          }
        },
        {
          "name": "2. Map Phone Number (Flow mode)",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone_number\": \"+919876543210\",\n  \"mode\": \"flow\"\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/phone-numbers",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "phone-numbers"]
            },
            "description": "Maps phone number with mode=flow for Voice AI routing."
          }
        },
        {
          "name": "3. Whitelist IP",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ip\": \"<your_server_ip>\",\n  \"mask\": 32\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/whitelisted-ips",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "whitelisted-ips"]
            },
            "description": "Whitelists your server IP."
          }
        },
        {
          "name": "4. Get Credentials",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/credentials",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "credentials"]
            },
            "description": "Gets SIP credentials for configuration."
          }
        }
      ]
    },
    {
      "name": "UPDATE MODE",
      "description": "Switch between PSTN and Flow mode.",
      "item": [
        {
          "name": "Update to Flow Mode (StreamKit)",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone_number\": \"+919876543210\",\n  \"mode\": \"flow\"\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/phone-numbers/<phone_number_id>",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "phone-numbers", "<phone_number_id>"]
            },
            "description": "Changes existing phone number to Flow mode for StreamKit."
          }
        },
        {
          "name": "Update to PSTN Mode",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone_number\": \"+919876543210\",\n  \"mode\": \"pstn\"\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/phone-numbers/<phone_number_id>",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "phone-numbers", "<phone_number_id>"]
            },
            "description": "Changes existing phone number to PSTN mode for standard calls."
          }
        }
      ]
    },
    {
      "name": "GET APIs",
      "item": [
        {
          "name": "Get Phone Numbers",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/phone-numbers",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "phone-numbers"]
            },
            "description": "Lists all phone numbers mapped to the trunk."
          }
        },
        {
          "name": "Get Whitelisted IPs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/whitelisted-ips",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "whitelisted-ips"]
            },
            "description": "Lists all whitelisted IPs for the trunk."
          }
        },
        {
          "name": "Get Destination URIs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/destination-uris",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "destination-uris"]
            },
            "description": "Lists all destination URIs for inbound routing."
          }
        },
        {
          "name": "Get Credentials",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/credentials",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "credentials"]
            },
            "description": "Gets SIP authentication credentials."
          }
        }
      ]
    },
    {
      "name": "SETTINGS & DELETE",
      "item": [
        {
          "name": "Set Trunk Alias",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json"}],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"settings\": [\n    {\"name\": \"trunk_external_alias\", \"value\": \"+919876543210\"}\n  ]\n}"
            },
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks/<trunk_sid>/settings",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks", "<trunk_sid>", "settings"]
            },
            "description": "Sets external caller ID alias."
          }
        },
        {
          "name": "Delete Trunk",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "https://<subdomain>/v2/accounts/<your_sid>/trunks?trunk_sid=<trunk_sid>",
              "protocol": "https",
              "host": ["<subdomain>"],
              "path": ["v2", "accounts", "<your_sid>", "trunks"],
              "query": [{"key": "trunk_sid", "value": "<trunk_sid>"}]
            },
            "description": "Permanently deletes the trunk and all configurations."
          }
        }
      ]
    }
  ],
  "auth": {
    "type": "basic",
    "basic": [
      {"key": "username", "value": "", "type": "string"},
      {"key": "password", "value": "", "type": "string"}
    ]
  }
}
