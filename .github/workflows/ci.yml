name: CI - Validation

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Validate shell scripts
      run: |
        echo "Validating shell scripts..."
        find curl/ -name "*.sh" -exec bash -n {} \;
        echo "Shell scripts are valid"
        
    - name: Validate JSON files
      run: |
        echo "Validating JSON files..."
        for file in postman/*.json; do
          python3 -m json.tool "$file" > /dev/null
        done
        echo "JSON files are valid"
        
    - name: Check for sensitive information
      run: |
        echo "Checking for sensitive information..."
        
        # Check .env file doesn't have real values (only check if exists)
        if [ -f ".env" ]; then
          echo "ERROR: .env file should not be committed"
          exit 1
        fi
        
        echo "No sensitive information found"
